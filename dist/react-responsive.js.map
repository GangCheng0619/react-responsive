{"version":3,"file":null,"sources":["../src/mediaQuery.js","../src/toQuery.js","../src/index.js"],"sourcesContent":["var PropTypes = require('react').PropTypes;\nvar assign = require('object-assign');\n\nvar stringOrNumber = PropTypes.oneOfType([\n  PropTypes.string,\n  PropTypes.number\n]);\n\n// properties that match media queries\nvar matchers = {\n  orientation: PropTypes.oneOf([\n    'portrait',\n    'landscape'\n  ]),\n\n  scan: PropTypes.oneOf([\n    'progressive',\n    'interlace'\n  ]),\n\n  aspectRatio: PropTypes.string,\n  deviceAspectRatio: PropTypes.string,\n\n  height: stringOrNumber,\n  deviceHeight: stringOrNumber,\n\n  width: stringOrNumber,\n  deviceWidth: stringOrNumber,\n\n  color: PropTypes.bool,\n\n  colorIndex: PropTypes.bool,\n\n  monochrome: PropTypes.bool,\n  resolution: stringOrNumber\n};\n\n// media features\nvar features = {\n  minAspectRatio: PropTypes.string,\n  maxAspectRatio: PropTypes.string,\n  minDeviceAspectRatio: PropTypes.string,\n  maxDeviceAspectRatio: PropTypes.string,\n\n  minHeight: stringOrNumber,\n  maxHeight: stringOrNumber,\n  minDeviceHeight: stringOrNumber,\n  maxDeviceHeight: stringOrNumber,\n\n  minWidth: stringOrNumber,\n  maxWidth: stringOrNumber,\n  minDeviceWidth: stringOrNumber,\n  maxDeviceWidth: stringOrNumber,\n\n  minColor: PropTypes.number,\n  maxColor: PropTypes.number,\n\n  minColorIndex: PropTypes.number,\n  maxColorIndex: PropTypes.number,\n\n  minMonochrome: PropTypes.number,\n  maxMonochrome: PropTypes.number,\n\n  minResolution: stringOrNumber,\n  maxResolution: stringOrNumber\n};\n\nassign(features, matchers);\n\n// media types\nvar types = {\n  all: PropTypes.bool,\n  grid: PropTypes.bool,\n  aural: PropTypes.bool,\n  braille: PropTypes.bool,\n  handheld: PropTypes.bool,\n  print: PropTypes.bool,\n  projection: PropTypes.bool,\n  screen: PropTypes.bool,\n  tty: PropTypes.bool,\n  tv: PropTypes.bool,\n  embossed: PropTypes.bool\n};\n\nvar all = {};\nassign(all, types);\nassign(all, features);\n\n// add the type property\nassign(matchers, { type: Object.keys(types) });\n\nexport default {\n  all: all,\n  types: types,\n  matchers: matchers,\n  features: features\n};\n","'use strict';\n\nvar hyphenate = require('hyphenate-style-name');\nvar mq = require('./mediaQuery');\n\nfunction negate(cond) {\n  return 'not ' + cond;\n}\n\nfunction keyVal(k, v) {\n  var realKey = hyphenate(k);\n\n  // px shorthand\n  if (typeof v === 'number') {\n    v = v+'px';\n  }\n  if (v === true) {\n    return k;\n  }\n  if (v === false) {\n    return negate(k);\n  }\n  return '('+realKey+': '+v+')';\n}\n\nfunction join(conds) {\n  return conds.join(' and ');\n}\n\nexport default function(obj){\n  var rules = [];\n  Object.keys(mq.all).forEach(function(k){\n    var v = obj[k];\n    if (v != null) {\n      rules.push(keyVal(k, v));\n    }\n  });\n  return join(rules);\n};\n","'use strict';\n\nvar React = require('react');\nvar matchMedia = require('matchmedia');\nvar hyphenate = require('hyphenate-style-name');\nimport mediaQuery from './mediaQuery';\nimport toQuery from './toQuery';\nvar assign = require('object-assign');\n\nvar defaultTypes = {\n  component: React.PropTypes.node,\n  query: React.PropTypes.string,\n  values: React.PropTypes.shape(mediaQuery.matchers),\n  children: React.PropTypes.oneOfType([React.PropTypes.node, React.PropTypes.function])\n};\nvar mediaKeys = Object.keys(mediaQuery.all);\nvar excludedQueryKeys = Object.keys(defaultTypes);\nvar excludedPropKeys = excludedQueryKeys.concat(mediaKeys);\n\nfunction omit(object, keys){\n  var newObject = assign({}, object);\n  keys.forEach(function(key){\n    delete newObject[key];\n  });\n  return newObject;\n}\n\nvar mq = React.createClass({\n  displayName: 'MediaQuery',\n\n  getDefaultProps: function(){\n    return {\n      values: {}\n    };\n  },\n\n  getInitialState: function(){\n    return {\n      matches: false\n    };\n  },\n\n  componentWillMount: function(){\n    this.updateQuery(this.props);\n  },\n\n  componentWillReceiveProps: function(props){\n    this.updateQuery(props);\n  },\n\n  updateQuery: function(props){\n    var values;\n    if (props.query) {\n      this.query = props.query;\n    } else {\n      this.query = toQuery(omit(props, excludedQueryKeys));\n    }\n\n    if (!this.query) {\n      throw new Error('Invalid or missing MediaQuery!');\n    }\n\n    if (props.values) {\n      values = Object.keys(props.values)\n        .reduce(function(result, key){\n          result[hyphenate(key)] = props.values[key];\n          return result;\n        }, {});\n    }\n\n    if (this._mql) {\n      this._mql.removeListener(this.updateMatches);\n    }\n\n    this._mql = matchMedia(this.query, values);\n    this._mql.addListener(this.updateMatches);\n    this.updateMatches();\n  },\n\n  componentWillUnmount: function(){\n    this._mql.removeListener(this.updateMatches);\n  },\n\n  updateMatches: function(){\n    if (this._mql.matches === this.state.matches) {\n      return;\n    }\n    this.setState({\n      matches: this._mql.matches\n    });\n  },\n\n  render: function(){\n    if(typeof this.props.children === 'function') {\n      return this.props.children(this.state.matches);\n    }\n\n    if (this.state.matches === false) {\n      return null;\n    }\n    var props = omit(this.props, excludedPropKeys);\n    var hasMergeProps = Object.keys(props).length > 0;\n    var childrenCount = React.Children.count(this.props.children);\n    var wrapChildren = this.props.component ||\n      childrenCount > 1 ||\n      typeof this.props.children === 'string' ||\n      this.props.children === undefined;\n    if (wrapChildren) {\n      return React.createElement(\n        this.props.component || 'div',\n        props,\n        this.props.children\n      );\n    } else if (hasMergeProps) {\n      return React.cloneElement(\n        this.props.children,\n        props\n      );\n    } else if (childrenCount){\n      return this.props.children;\n    }\n    else {\n      return null;\n    }\n  }\n});\n\nexport default mq;\n"],"names":["PropTypes","require","assign","stringOrNumber","oneOfType","string","number","matchers","oneOf","bool","features","types","all","type","hyphenate","mq","negate","cond","keyVal","k","v","realKey","join","conds","obj","rules","forEach","push","React","matchMedia","defaultTypes","node","shape","mediaQuery","function","mediaKeys","excludedQueryKeys","excludedPropKeys","concat","omit","object","keys","newObject","key","createClass","updateQuery","props","values","query","toQuery","Error","reduce","result","_mql","removeListener","updateMatches","addListener","matches","state","setState","children","hasMergeProps","length","childrenCount","Children","count","wrapChildren","component","undefined","createElement","cloneElement"],"mappings":"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"}